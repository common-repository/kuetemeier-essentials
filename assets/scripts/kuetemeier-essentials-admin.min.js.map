{"version":3,"sources":["admin.js"],"names":["kuetemeier_essential_admin","jQuery","$","clear","val","hide","text","on","e","show","preventDefault","isAdding","prop","postData","url","width","height","mime-type","wp","media","post","response","attachment","model","Attachment","create","fetch","frame","library","content","mode","state","get","add","_state","selection","css","fail"],"mappings":"aAuBA,SAASA,8BAITC,OAAO,SAAWC,GAAlBD,IAAAA,GAAO,EAGN,SAASE,IAATD,EAAA,mBAAiBE,IAAA,IAChBF,EAAG,sBAAyBG,OAC5BH,EAAG,qBAAuBG,KAA1B,IACAH,EAAG,qBAAsBI,IAAzB,IACAJ,EAAG,sBAAHE,IAAA,IACAF,EAAG,yBAA4BE,IAA/B,IAIDF,EAAG,QAASK,GAAI,QAAS,oBAAqB,SAAWC,GAAzDN,MAIAA,EAAG,QAASK,GAAI,QAAS,mBAAoB,SAAWC,GAAxDN,EAAG,+BAAsBO,OACxBP,EAAGQ,mBAIJR,EAAG,QAASK,GAAI,QAAS,2CAA4C,SAAWC,GAAhFN,IAAGS,EAAHT,CAGES,GAAA,EAGDT,EAAE,4CAA4CU,KAAK,YAAY,GAE/D,IAAIC,EAAW,CAAfC,IAAID,EAAAA,mBAAWT,MACdW,MAAUb,EAAA,qBADIE,MAEdY,OAASd,EAAG,sBAAHE,MACTa,YAAaf,EAAA,yBAHCE,OAAAc,GAAfC,MAAAC,KAAA,+CAAAP,GAMAK,KAAGC,SAAWE,GAEZ,IAAIC,EAAaJ,GAAGC,MAAMI,MAAMC,WAAWC,OAAQJ,GACnDC,EAAWI,QAGX,IAAIC,EAAQT,GAAGC,MAAMQ,OAAST,GAAGC,MAAMS,QACvC,GAAKD,IACJA,EAAME,QAAQC,KAAM,WAINH,EAAMI,QAAQC,IAAK,YAAeL,EAAMC,SAC9CK,IAAKX,EAAeA,CAAAA,GAA5B,IAE8B,WAAzBJ,GAAGC,MAAMQ,MAAMO,QAAsB,CACzC,IAAIC,EAAYR,EAAMI,QAAQC,IAAK,aAC9BG,GACJA,EAAUF,IAAKX,GAMlBnB,IACAD,EAAG,sBAAuBG,OAC1BH,EAAG,oCAAHkC,IAA6C,aAAc,UAC3DlC,EAAG,4CAA4CU,KAAK,YAAY,GAChED,GAAW,IACT0B,KAAK,SAAUhB,GACjBnB,EAAG,qBAAsBI,KAAMe,EAAAA,OAC/BnB,EAAG,qBAAHE,IAA8BiB,EAAAA,OAC9BnB,EAAG,sBAAHE,IAA+BiB,EAAAA,QAC/BnB,EAAG,yBAAHE,IAAkCiB,EAAS,cAC3CnB,EAAG,sBAAuBO,OAC1BP,EAAG,oCAAHkC,IAA6C,aAAc,UAC3DlC,EAAG,4CAA6CU,KAAK,YAAY,GACjED,GAAW,IAEbH,EAAEE,iBACFR,EAAG,oCAAqCkC,IAAK,aAAc,cAG5DlC,EAAG,QAAHK,GAAgB,QAAS,8CAA+C,SAAcC,GACrFL,IACAD,EAAG,+BAAgCG,OACnCH,EAAG,oCAAqCkC,IAAK,aAAc,UAC3DlC,EAAG,4CAA6CU,KAAK,YAAY,GACjED,GAAW,EACXH,EAAEE","file":"kuetemeier-essentials-admin.min.js","sourcesContent":["/* eslint-env browser */\n\n/*\n * JavaScript file for admin functions of the\n * WordPress Plugin Kuetemeier-Essentials\n *\n * Copyright 2018 Jörg Kütemeier (https://kuetemeier.de/kontakt)\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n\nfunction kuetemeier_essential_admin() {\n\t//console.log(\"Hello World Admin!\");\n}\n\njQuery(function ( $ ) {\n\tvar isAdding = false;\n\n\tfunction clear() {\n\t\t$( '#kuetemeier-url' ).val( '' );\n\t\t$( '#kuetemeier-hidden' ).hide();\n\t\t$( '#kuetemeier-error' ).text( '' );\n\t\t$( '#kuetemeier-width' ).val( '' );\n\t\t$( '#kuetemeier-height' ).val( '' );\n\t\t$( '#kuetemeier-mime-type' ).val( '' );\n\t}\n\n\t$( 'body' ).on( 'click', '#kuetemeier-clear', function ( e ) {\n\t\tclear();\n\t});\n\n\t$( 'body' ).on( 'click', '#kuetemeier-show', function ( e ) {\n\t\t$( '#kuetemeier-media-new-panel' ).show();\n\t\te.preventDefault();\n\t});\n\n\t$( 'body' ).on( 'click', '#kuetemeier-in-upload-ui #kuetemeier-add', function ( e ) {\n\t\tif ( isAdding ) {\n\t\t\treturn;\n\t\t}\n\t\tisAdding = true;\n\n\t\t$('#kuetemeier-in-upload-ui #kuetemeier-add').prop('disabled', true);\n\n\t\tvar postData = {\n\t\t\t'url': $( '#kuetemeier-url' ).val(),\n\t\t\t'width': $( '#kuetemeier-width' ).val(),\n\t\t\t'height': $( '#kuetemeier-height' ).val(),\n\t\t\t'mime-type': $( '#kuetemeier-mime-type' ).val()\n\t\t};\n\t\twp.media.post('kuetemeier_add_external_media_without_import', postData )\n\t\t\t.done(function ( response ) {\n\t\t\t\tvar attachment = wp.media.model.Attachment.create( response );\n\t\t\t\tattachment.fetch();\n\n\t\t\t\t// Update the attachment list in browser.\n\t\t\t\tvar frame = wp.media.frame || wp.media.library;\n\t\t\t\tif ( frame ) {\n\t\t\t\t\tframe.content.mode( 'browse' );\n\n\t\t\t\t\t// The frame variable may be MediaFrame.Manage or MediaFrame.EditAttachments.\n\t\t\t\t\t// In the later case, library = frame.library.\n\t\t\t\t\tvar library = frame.state().get( 'library' ) || frame.library;\n\t\t\t\t\tlibrary.add( attachment ? [ attachment ] : [] );\n\n\t\t\t\t\tif ( wp.media.frame._state != 'library' ) {\n\t\t\t\t\t\tvar selection = frame.state().get( 'selection' );\n\t\t\t\t\t\tif ( selection ) {\n\t\t\t\t\t\t\tselection.add( attachment );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Reset the input.\n\t\t\t\tclear();\n\t\t\t\t$( '#kuetemeier-hidden' ).hide();\n\t\t\t\t$( '#kuetemeier-buttons-row .spinner' ).css( 'visibility', 'hidden' );\n\t\t\t\t$( '#kuetemeier-in-upload-ui #kuetemeier-add').prop('disabled', false);\n\t\t\t\tisAdding = false;\n\t\t\t}).fail(function (response ) {\n\t\t\t\t$( '#kuetemeier-error' ).text( response['error'] );\n\t\t\t\t$( '#kuetemeier-width' ).val( response['width'] );\n\t\t\t\t$( '#kuetemeier-height' ).val( response['height'] );\n\t\t\t\t$( '#kuetemeier-mime-type' ).val( response['mime-type'] );\n\t\t\t\t$( '#kuetemeier-hidden' ).show();\n\t\t\t\t$( '#kuetemeier-buttons-row .spinner' ).css( 'visibility', 'hidden' );\n\t\t\t\t$( '#kuetemeier-in-upload-ui #kuetemeier-add' ).prop('disabled', false);\n\t\t\t\tisAdding = false;\n\t\t\t});\n\t\te.preventDefault();\n\t\t$( '#kuetemeier-buttons-row .spinner' ).css( 'visibility', 'visible' );\n\t});\n\n\t$( 'body' ).on( 'click', '#kuetemeier-in-upload-ui #kuetemeier-cancel', function (e ) {\n\t\tclear();\n\t\t$( '#kuetemeier-media-new-panel' ).hide();\n\t\t$( '#kuetemeier-buttons-row .spinner' ).css( 'visibility', 'hidden' );\n\t\t$( '#kuetemeier-in-upload-ui #kuetemeier-add' ).prop('disabled', false);\n\t\tisAdding = false;\n\t\te.preventDefault();\n\t});\n});\n"]}